var contacts;(function(c){var b="contacts";function d(e){navigator.contacts.find(["*"],function(f){window.localStorage.setItem(b,JSON.stringify(f));e(null)},function(){e("Error retrieving contacts from device.")})}c.refreshContacts=d;function a(e,f,j){var g;function i(){g=JSON.parse(window.localStorage.getItem(b));if(g===null){d(h);g=JSON.parse(window.localStorage.getItem(b))}else{h()}}function h(){for(var n=0;n<g.length;n++){if(g[n].phoneNumbers!==null){for(var m=0;m<g[n].phoneNumbers.length;m++){var l=null;var p=e===null;var o=f===null;if(e!==null){if(g[n].displayName===e){l=g[n];p=true}}if(f!==null){var q=g[n].phoneNumbers[m].value;q=q.replace(/[^\d]/g,"");q=q.replace(/^.*(\d{10})$/,"$1");if(q===f){l=g[n];o=true}}if(p&&o){j(g[n]);return}}}}j(null)}i()}c.getContact=a})(contacts||(contacts={}));